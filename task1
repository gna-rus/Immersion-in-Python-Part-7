import os


def generate_text_files(name_gen, nums, directory, ext):
    """Функция создает nums пустых файлов
    Принимает: количество создаваемых файлов и дирректорию в которой надо создать файлы"""
    if not os.path.exists(directory):
        os.makedirs(directory)
    for i in range(1, nums + 1):
        filename = f'{directory}/{name_gen}{i}.{ext}'
        with open(filename, 'w') as file:
            file.write(' ')


def rename_files(directory, new_name, num_digits, src_ext, dst_ext, range_word, old_name):
    # Получаем список всех файлов в каталоге с указанным расширением
    files = [f for f in os.listdir(directory) if f.endswith(src_ext)]
    print(f"Файлы в папке {directory}: \n{files}")


    # Сортировка по имени файла для корректной нумерации
    files.sort()

    # Форматируем строку для добавления номера
    part_of_old_name = old_name[range_word[0]: range_word[1]]

    format_str = f'{part_of_old_name}{new_name}-{{0:0{num_digits}d}}.{dst_ext}'
    print(f"Формат нового имени: {format_str}")

    # Перебираем файлы и выполняем переименование
    for i, file in enumerate(files):
        old_path = os.path.join(directory, file)
        new_filename = format_str.format(i + 1)
        new_path = os.path.join(directory, new_filename)

        try:
            os.rename(old_path, new_path)
        except OSError as e:
            print(f"ERROR! {old_path} -> {new_path}: {e}")


nums = 5 # Количество создаваемых файлов
name_gen = 'file_'
dir = './files' # Дирректория в которой будут созданы файлы
ext = 'txt' # Формат создаваемых файлов

generate_text_files(name_gen, nums, dir, ext) # Генерирую файлы в папке

digits = 4 # Количество цифр в номере создаваемых файлов
name = 'my_file' # Новое имя для файлов
new_ext = 'png' # Новый формат файла
range = [1,3]

# Переименовываю файлы в папке
rename_files(
    directory=dir,
    new_name=name,
    num_digits=digits,
    src_ext=ext,
    dst_ext=new_ext,
    range_word=range,
    old_name=name_gen
)
